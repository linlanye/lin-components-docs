LBA架构
----
LBA（Layer, Block, Affix）架构由层、块、摆件三个部分构成，是一套系统架构方案。可以让开发更加规范化、解耦化、分工更加明确、后期升级更加弹性化等，是一种新的架构模式。本架构由**林澜叶**独自提出。

---

### 具体说明

LBA架构中，最核心的Layer部分、其次是Block部分、最后才是Affix。

如果用建筑物来比喻，Layer好比建筑框架，它决定了整个建筑的根本特性。每一个Layer相当于一层楼房，这层楼房具有一个特有的功能，比如是商务区或住宿区等，不同的Layer则一起构成了一座完整的建筑物框架。

Block则像是对每一层楼中的具体功能划分的实现，如对商务区楼层的实现需要引入大量办公桌椅，而对住宿区楼层的实现则需要引入大量的家具。每一个Block就像是一种必备的建筑内物，它可以是办公桌椅、家具或装修，这些不同的块组合在一起实现了当前楼层的特有功能，它和Layer一起构成了一个完整的建筑。

而Affix则是对本层楼中已经完成的实现添砖加瓦，让其更加完善，但这种功能并非必须。它像是一种点缀，用于增强当前功能区域的特性，如商务区中摆放的一件大花瓶。没有Affix不会影响应用的运行，但有了Affix后应用的功能得到强化。


---

#### Layer（层）

核心架构所在，由整套不同的逻辑单元组成，彼此之间相互独立，是整个应用的骨架部分。如缓存层、数据访问层、控制器层、响应层等等。不同的层提供不同的应用场景，一个层可以看作一个用于调度不同功能的类或方法。

#### Block（块）

依托于层而存在，为层提供一种功能，是对层功能的具体实现，是整个应用的血肉部分。一个块可以看作是具有某个功能的类，不同的块在同一个层中构成一个完备的应用场景。如在数据访问层中，数据模型提供对数据库的对象化操作，数据格式化器和映射器则提供存储数据到应用数据的一个映射。


#### Affix（摆件）

作为对层的点缀或装饰，是一种可选的功能，它的添加和移除对整个应用架构没有影响。不同的摆件可以看作是一种功能扩展，它可以是一个类，也可以是一个脚本，一句代码，起到强化应用的作用。如视图页面、路由文件、语言包在小型应用中都可以看作摆件，可以无需视图（API开发），也可以无需路由(仅通过层来调度)，更可以无需语言包。


---

### 类比MVC

对于MVC架构，Model相当于块，View则为摆件，Controller则对应层。基于MVC的各种变体也能在LBA架构中找到对应，实际上LBA正是对这套架构体系的一个更抽象的扩展，它能够适用于更大型的应用架构中。值得注意的是，LBA架构并没有对功能进行约束，开发者需根据实际情况选型。例如小型应用中路由可以看作摆件，但在大型应用中，路由则应作为层。


---

### Lin中的LBA

在Lin中，LBA被定义成三个目录，每一个目录存放不同的Layer、Block和Affix。其中Layer和Block中都只存放类，而Affix则不做限制，具体请查看[目录说明](directory.md)。